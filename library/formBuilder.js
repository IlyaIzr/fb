window.callForm2 = (path, data={}, config) => {
 try 
 { 
 const id = "form" + Date.now();  
const div = document.createElement("div");
div.id = id;
const pathElement = document.querySelector(path);  
while (pathElement.firstChild) {    
pathElement.removeChild(pathElement.lastChild);  
}  
pathElement.appendChild(div);
let renderer = (rootId, formValues, formConfig) => {
(function(t){function e(e){for(var r,o,a=e[0],l=e[1],u=e[2],f=0,p=[];f<a.length;f++)o=a[f],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);c&&c(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,a=1;a<n.length;a++){var l=n[a];0!==s[l]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},s={0:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var a=window["webpackJsonpFB2"]=window["webpackJsonpFB2"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var c=l;i.push([0,1]),n()})({0:function(t,e,n){t.exports=n("2f39")},"118e":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.fields?n("div",{staticClass:"fb-fields-wrap col-grow row items-center "},t._l(t.fields,(function(e){return n("Field",{key:e.key,attrs:{fieldInfo:e,rowNumber:t.order,order:t.fields.indexOf(e)}})})),1):t._e()},s=[],i=n("8c12"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.visibleTrigger,class:"fb-service-visibility-trigger"+("button"==t.inputType?"":" col"),style:!t.fieldInfo.visible&&"display: none"},[t.fieldInfo.visible&&"button"!==t.inputType?n("div",{class:"fb-field-container col "+(t.fieldInfo.multiKey?"":" q-mx-md")},[n("div",{staticClass:"fb-field row q-my-sm"},["simple"===t.inputType?n("SimpleInput",{attrs:{keyName:t.fieldInfo.key,rest:t.rest}}):t._e(),"select"===t.inputType?n("Select",{attrs:{keyName:t.fieldInfo.key,rest:t.rest}}):t._e(),"multiple"===t.inputType?n("Multiple",{attrs:{keyName:t.fieldInfo.key,rest:t.rest}}):t._e(),"slider"===t.inputType?n("Slider",{attrs:{keyName:t.fieldInfo.key,rest:t.rest}}):t._e(),"date"===t.inputType?n("Date",{attrs:{keyName:t.fieldInfo.key,rest:t.rest}}):t._e(),"checkbox"===t.inputType?n("Checkbox",{attrs:{keyName:t.fieldInfo.key,rest:t.rest}}):t._e(),"file"===t.inputType?n("File",{attrs:{keyName:t.fieldInfo.key,rest:t.rest}}):t._e(),"html"===t.inputType?n("Html",{attrs:{keyName:t.fieldInfo.key,rest:t.rest}}):t._e(),"editor"===t.inputType?n("Editor",{attrs:{keyName:t.fieldInfo.key,rest:t.rest}}):t._e(),"err"===t.inputType?n("div",[t._v("\n        err, wrong type: "+t._s(t.fieldInfo.type)+"\n      ")]):t._e()],1)]):"button"===t.inputType?n("div",{staticClass:"fb-field-button-container"},["button"===t.inputType?n("Button",{attrs:{keyName:t.fieldInfo.key,rest:t.rest}}):t._e()],1):t._e()])},a=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.rest.visible?n("div",{staticClass:"q-gutter-md col fb-field-simple"},[n("q-input",t._b({ref:"input",staticClass:"fb-field-content",attrs:{rules:t.rules},on:{focus:t.onFocus,input:t.onInput},scopedSlots:t._u([{key:"before",fn:function(){return[n("Attachment",{attrs:{config:t.outerLeft,f:t.outerLeftClick}})]},proxy:!0},t.innerLeft?{key:"prepend",fn:function(){return[n("Attachment",{attrs:{config:t.innerLeft,f:t.innerLeftClick}})]},proxy:!0}:null,t.innerRight||t.isPassword?{key:"append",fn:function(){return[n("Attachment",{attrs:{config:t.innerRight,f:t.innerRightClick}}),t.isPassword?n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPassword?"visibility_off":"visibility"},on:{click:t.pSwitch}}):t._e()]},proxy:!0}:null,{key:"after",fn:function(){return[n("Attachment",{attrs:{config:t.outerRight,f:t.outerRightClick}})]},proxy:!0}],null,!0)},"q-input",t.rest,!1))],1):t._e()},u=[],c=n("ca22"),f=n.n(c),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.config?n("div",{staticClass:"fb-attachment col-grow q-pt-md q-mx-sm"},["icon"===t.config.type?n("q-icon",t._b({},"q-icon",t.config,!1)):"img"===t.config.type?n("q-avatar",[n("img",t._b({},"img",t.config,!1))]):"button"===t.config.type?n("q-btn",t._b({attrs:{round:"",dense:"",flat:""},on:{click:t.f}},"q-btn",t.config,!1)):"html"===t.config.type?n("q-card-section",{domProps:{innerHTML:t._s(t.config.value)}}):t._e()],1):t._e()},d=[],h={name:"Attachment",props:{config:{required:!1},f:Function}},b=h,m=n("2be6"),v=n("0016"),y=n("cb32"),g=n("9c40"),w=n("a370"),k=n("8ccf"),_=n.n(k),x=Object(m["a"])(b,p,d,!1,null,null,null),q=x.exports;_()(x,"components",{QIcon:v["a"],QAvatar:y["a"],QBtn:g["a"],QCardSection:w["a"]});n("e6cf"),n("ddb0");const C={async onInput(t,e){var n;if(this.rest.meta){const e=this.rest.metaValueKey||"value";this.rest.meta[e]=t}this.rest.value=t,null!==(n=this.rest)&&void 0!==n&&n.onInput&&(void 0!==e&&(t=e),await this.rest.onInput(i["a"],this,t))},async onFocus(){this.rest.onFocus&&await this.rest.onFocus(i["a"],this,this.rest)},async onBlur(t){var e;null!==(e=this.rest)&&void 0!==e&&e.onBlur&&await this.rest.onBlur(i["a"],this,this.rest)},reset(){i["a"].fields[this.keyName]=f()({},i["b"][this.keyName])},rerender(){this.$forceUpdate()},clear(){this.onInput("")}},I={async outerLeftClick(){var t,e,n;null!==(t=this.outerLeftClick)&&void 0!==t&&t.onClick&&await(null===(e=(n=this.outerLeftClick).onClick)||void 0===e?void 0:e.call(n,i["a"],this,this.rest))},async innerLeftClick(){var t,e,n;null!==(t=this.innerLeft)&&void 0!==t&&t.onClick&&await(null===(e=(n=this.innerLeft).onClick)||void 0===e?void 0:e.call(n,i["a"],this,this.rest))},async innerRightClick(){var t,e,n;null!==(t=this.innerRight)&&void 0!==t&&t.onClick&&await(null===(e=(n=this.innerRight).onClick)||void 0===e?void 0:e.call(n,i["a"],this,this.rest))},async outerRightClick(){var t,e,n;null!==(t=this.outerRightClick)&&void 0!==t&&t.onClick&&await(null===(e=(n=this.outerRightClick).onClick)||void 0===e?void 0:e.call(n,i["a"],this,this.rest))}};function O(t,e,n){const r=[];return t.forEach((t=>{const s=r=>t(r,e.getFormValues(),e,n);r.push(s)})),r}const S={rules(){return R(this.rest.rules,this.rest.required,this.rest.requiredMessage,this.rest.metaValue,this.rest)}};function R(t,e,n,r,s){let o=O(t,i["a"],r);const a=n||"Please fill",l=s.type;let u;return e?("select"===l&&s.multiple&&(u=t=>t&&t.length||a),"date"!==l||s.range||(u=t=>t.split(".")[0]<32&&t.split(".")[1]<13&&t.split(".")[2]>1900||a),"date"===l&&(u=t=>{const e=s.value;if(!t||t.length<23)return a;const{from:n,to:r}=e;let[i,o,l]=n.split(".");return i>31||o>12||l<1900?a:([i,o,l]=r.split("."),!(i>31||o>12||l<1900)||a)}),"slider"===l&&(u=t=>Number(t)>0||a),u=t=>Boolean(t)||a):"date"===l&&(u=s.range?t=>{if(!t)return!0;const e=s.value;if(!t||t.length<23)return a;const{from:n,to:r}=e;let[i,o,l]=n.split(".");return i>31||o>12||l<1900?a:([i,o,l]=r.split("."),!(i>31||o>12||l<1900)||a)}:t=>!1===Boolean(t)||t.split(".")[0]<32&&t.split(".")[1]<13&&t.split(".")[2]>1900||a),o=[u,...o],o}const j={outerLeft(){let t={};return this.rest.outerLeft?(t=this.rest.outerLeft,t.type?t:null):null},innerLeft(){let t={};return this.rest.innerLeft?(t=this.rest.innerLeft,t.type?t:null):null},innerRight(){let t={};return this.rest.innerRight?(t=this.rest.innerRight,t.type?t:null):null},outerRight(){let t={};return this.rest.outerRight?(t=this.rest.outerRight,t.type?t:null):null}};function M(t,e){e.component||Object.defineProperty(e,"component",{get(){return t}})}function L(t){return new Promise(((e,n)=>{let r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=n,r.readAsArrayBuffer(t)}))}var E={name:"SimpleInput",components:{Attachment:q},props:{keyName:{type:String,required:!0},rest:Object},data(){return{isPassword:"password"===this.rest.type}},computed:f()(f()({},S),j),methods:f()(f()(f()({},C),I),{},{pSwitch(){this.rest.type="text"===this.rest.type?"password":"text"}}),beforeMount(){var t;const e=this.rest;"dateNative"===e.type&&(e.type="date"),null!==(t=e.autocomplete)&&void 0!==t||(e.autocomplete=!0)},mounted(){M(this,this.rest)},watch:{}},N=E,$=n("27f9"),B=Object(m["a"])(N,l,u,!1,null,null,null),A=B.exports;_()(B,"components",{QInput:$["a"],QIcon:v["a"]});var F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.rest.visible?n("div",{ref:"wrap",staticClass:"fb-multiple q-gutter-md q-pa-xs q-my-md"},[n("h5",{ref:"label",staticClass:"fb-field-label q-mx-none absolute-center q-px-xs"},[t._v("\n    "+t._s(t.rest.label)+"\n  ")]),n("MultiMapper",{key:t.computeRawsTrigger,attrs:{multiRows:t.rows,multiKey:t.rest.key},on:{remove:t.removeField}}),n("q-btn",{staticClass:"fb-multiple-add-button full-width q-ma-sm",attrs:{size:"sm",label:t.addButton.label||"Добавить",color:t.addButton.color||"green","text-color":t.addButton.textColor,disable:t.addButton.disable},on:{click:t.addField}},[n("i",[t._v("+")]),t.addButton.tooltip?n("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[5,5]}},[t._v("\n      "+t._s(t.addButton.tooltip||"Добавить поле")+"\n    ")]):t._e()],1)],1):t._e()},V=[],T=(n("a434"),n("91a1")),Q=n("1ecf"),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fb-row fb-field-content fb-multiple-content row"},t._l(t.multiRows,(function(e,r){return n("div",{key:t.multiRows.indexOf(e),staticClass:"fb-multiple-row col-12 q-ma-md"},[n("div",{staticClass:"fb-inner-row"},[n("RowMapper",{attrs:{rows:e}}),t.multiKey?n("q-btn",{staticClass:"fb-multiple-remove-btn q-mr-md",attrs:{size:"xs",type:"button",label:t.remButton.label||"X",color:t.remButton.color||"red","text-color":t.remButton.textColor,disable:t.remButton.disable},on:{click:function(e){return t.$emit("remove",r)}}},[n("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[5,5]}},[t._v(" \n          "+t._s(t.remButton.tooltip||"Убрать")+"\n        ")])],1):t._e()],1)])})),0)},G=[],D={name:"MultiMapper",components:{RowMapper:()=>Promise.resolve().then(n.bind(null,"5f67"))},props:{multiRows:{type:Array,required:!0},multiKey:{type:String}},data(){var t;return{remButton:(null===(t=i["a"].buttons)||void 0===t?void 0:t.multipleRemove)||{}}},beforeMount(){this.multiRows.forEach((t=>{t.forEach((t=>{t.forEach((t=>{var e;const n=i["a"].fields[this.multiKey];null!==(e=n.fields)&&void 0!==e&&e[t.multiIndex]||(n.fields[t.multiIndex]={}),n.fields[t.multiIndex][t.key]=t}))}))}))}},K=D,z=(n("e42e"),n("05c0")),Y=Object(m["a"])(K,P,G,!1,null,null,null),H=Y.exports;_()(Y,"components",{QBtn:g["a"],QTooltip:z["a"]});var W={name:"MultipleInput",props:{keyName:{type:String,required:!0},rest:Object},components:{MultiMapper:H},data(){var t;return{computeRawsTrigger:1,rows:[],stringUpdates:1,addButton:(null===(t=i["a"].buttons)||void 0===t?void 0:t.multipleAdd)||{}}},computed:{},methods:f()(f()({},C),{},{computeRowsEffect(){var t;const e={};Object.entries(this.rest.settings).forEach((([t,n])=>{e[t]=f()({},n)}));const n=Object(T["a"])(f()({},e),null===(t=i["a"].values)||void 0===t?void 0:t[this.keyName],this.keyName,this.rest.value);this.rows=n},async addField(){const t={};Object.keys(this.rest.settings).forEach((e=>t[e]="")),await this.onInput([...this.rest.value,t]),this.redrawChildren()},async removeField(t){const e=[...this.rest.value];e.splice(t,1),await this.onInput(e),this.redrawChildren()},redrawChildren(){this.computeRowsEffect(),this.computeRawsTrigger+=1},clear(){this.rest.value=[]},rerender(){this.redrawChildren()}}),beforeMount(){const t=this,e=i["a"].fields[this.keyName];e.fields||(e.fields=[]);const n={set:function(e,n,r){var s,i;let o=e.type&&(null===(s=Q["e"][e.type])||void 0===s||null===(i=s[n])||void 0===i?void 0:i.call(s,r,e));return void 0!==o&&(r=o),t.stringUpdates={field:e,prop:n,value:r},e[n]=r,!0}},r=i["a"].fields[this.keyName].settings;Object.keys(r).forEach((t=>{r[t].key=t,r[t]=new Proxy(r[t],n)})),this.computeRowsEffect()},mounted(){M(this,this.rest);const{label:t,wrap:e}=this.$refs,n=t.clientHeight-32;n&&(e.className+=" fb-field-big-label-case")},watch:{"rest.settings":{handler(){this.computeRowsEffect(),this.computeRawsTrigger+=1},deep:!0},stringUpdates({field:t,prop:e,value:n}){var r;const s=i["a"].fields[this.keyName];null!==s&&void 0!==s&&null!==(r=s.fields)&&void 0!==r&&r.length&&s.fields.forEach((r=>{r[t.key]&&(r[t.key][e]=n)}))}}},U=W,J=(n("1598"),Object(m["a"])(U,F,V,!1,null,null,null)),X=J.exports;_()(J,"components",{QBtn:g["a"],QTooltip:z["a"]});var Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.rest.visible?n("div",{ref:"iWrapper",staticClass:"q-gutter-md col fb-field-select"},[n("q-select",t._b({ref:"input",staticClass:"fb-field-content",attrs:{rules:t.rules,value:t.localValue,"use-chips":Boolean(t.rest.value&&t.rest.value.length&&t.rest.clearable),options:t.localOptions,customInputCatcher:""},on:{input:t.onInputLocal,"input-value":t.shorthenOptions,focus:t.onFocus},scopedSlots:t._u([{key:"no-option",fn:function(){return[n("q-item",[n("q-item-section",{staticClass:"text-grey"},[t._v("\n          "+t._s(t.rest.noResultsMsg||"Нет результатов")+"\n        ")])],1)]},proxy:!0},{key:"before",fn:function(){return[n("Attachment",{attrs:{config:t.outerLeft,f:t.outerLeftClick}})]},proxy:!0},t.innerLeft?{key:"prepend",fn:function(){return[n("Attachment",{attrs:{config:t.innerLeft,f:t.innerLeftClick}})]},proxy:!0}:null,t.innerRight?{key:"append",fn:function(){return[n("Attachment",{attrs:{config:t.innerRight,f:t.innerRightClick}})]},proxy:!0}:null,{key:"after",fn:function(){return[n("Attachment",{attrs:{config:t.outerRight,f:t.outerRightClick}})]},proxy:!0}],null,!0)},"q-select",t.rest,!1))],1):t._e()},tt=[];n("c975");function et(t,e=!1){return e&&!t||e&&!t[0]?[]:e&&"string"===typeof t[0]?t:e&&t[0].id?t.map((t=>t.id)):e&&t[0].value?t.map((t=>t.value)):t?"string"===typeof t?t:t.id?t.id:t.value?t.value:void 0:""}var nt={name:"Select",components:{Attachment:q},props:{keyName:{type:String,required:!0},rest:{type:Object,required:!0}},data(){return{localValue:this.parseValue(this.rest.value),localOptions:this.parseOptions(this.rest.options),initOptions:this.parseOptions(this.rest.options)}},computed:f()(f()({},S),j),methods:f()(f()(f()({},C),I),{},{parseValue(t){var e;const n=this.parseOptions(this.rest.options);if(this.rest.multiple){if(!t||!t[0])return[];if("string"===typeof t[0])return n.filter((e=>t.includes(e.value)));const e=et(t,!0);if(t[0].value)return n.filter((t=>e(t.value)));if(t[0].id)return n.filter((t=>e(t.value)))}let r="";return void 0===t?r:null!==n&&void 0!==n&&n.length&&null!==n&&void 0!==n&&n[0]?(r="string"===typeof(null===n||void 0===n?void 0:n[0])?n.find((e=>t===e)):n.find((e=>e.id===t||e.value===t)),null!==(e=r)&&void 0!==e?e:""):r},parseOptions(t){if(null===t||void 0===t||!t.length)return[];if(t[0].value)return t;if("string"===typeof t[0])return t.map((t=>({label:t,value:t})));const e=[];return t.forEach((t=>{e.push({label:t.name,value:t.id})})),e},async onInputLocal(t){const e=Boolean(this.rest.multiple),n=et(t,e);e?(t||(t=[]),this.localValue=[...t],this.onInput([...n]),this.$nextTick((function(){document.querySelector(".q-field__input.q-placeholder.col.q-field__input--padding").value=""}))):(this.localValue=t,this.onInput(n))},async shorthenOptions(t){var e,n;const r=null===(e=t.toLocaleLowerCase)||void 0===e?void 0:e.call(t);let s=this.initOptions;t&&(s=this.initOptions.filter((t=>{var e,n;if((null===(e=t.label)||void 0===e||null===(n=e.toLocaleLowerCase)||void 0===n?void 0:n.call(e).indexOf(r))>-1)return t}))),this.localOptions=s,this.$emit("optionInput",t),null!==(n=this.rest)&&void 0!==n&&n.onSearchInput&&await this.rest.onSearchInput(i["a"],this,t),this.$nextTick((function(){var t,e;null===(t=this.$refs.input)||void 0===t||null===(e=t.resetValidation)||void 0===e||e.call(t)}))}}),beforeMount(){const t=this.rest;t["use-input"]=function(){return!(!t.writable&&!t["use-input"])||(void 0===t.writable||(t["use-input"]||t.writable))}()},mounted(){M(this,this.rest)},watch:{rest:{handler(t){this.localValue=this.parseValue(t.value);const e=this.parseOptions(t.options);this.localOptions=e,this.initOptions=e},deep:!0}}},rt=nt,st=(n("5104"),n("ddd8")),it=n("66e5"),ot=n("4074"),at=n("8572"),lt=n("b047"),ut=Object(m["a"])(rt,Z,tt,!1,null,null,null),ct=ut.exports;_()(ut,"components",{QSelect:st["a"],QItem:it["a"],QItemSection:ot["a"],QField:at["a"],QChip:lt["a"]});var ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.rest.visible?n("div",{staticClass:"q-gutter-md col fb-field-slider"},[n("q-field",{ref:"input",staticClass:"fb-field-label-slider",attrs:{borderless:"",label:t.rest.label,rules:t.rules,value:t.rest.value,hint:t.rest.hint},scopedSlots:t._u([{key:"control",fn:function(){return[n("q-slider",t._b({ref:"slider",staticClass:"fb-field-content",staticStyle:{"min-width":"180px"},attrs:{min:t.rest.min||0,max:t.rest.max||100,step:t.rest.step||.01,reverse:t.rest.reverse||!1,label:t.rest.showValue},on:{change:t.onBlur,input:t.onInput}},"q-slider",t.rest,!1))]},proxy:!0},{key:"before",fn:function(){return[n("Attachment",{attrs:{config:t.outerLeft,f:t.outerLeftClick}})]},proxy:!0},t.innerLeft?{key:"prepend",fn:function(){return[n("Attachment",{attrs:{config:t.innerLeft,f:t.innerLeftClick}})]},proxy:!0}:null,t.innerRight?{key:"append",fn:function(){return[n("Attachment",{attrs:{config:t.innerRight,f:t.innerRightClick}})]},proxy:!0}:null,{key:"after",fn:function(){return[n("Attachment",{attrs:{config:t.outerRight,f:t.outerRightClick}})]},proxy:!0}],null,!0)})],1):t._e()},pt=[],dt={name:"SliderInput",components:{Attachment:q},props:{keyName:{type:String,required:!0},rest:{type:Object,required:!0}},data(){return{}},computed:f()(f()({},S),j),methods:f()(f()({},C),I),beforeMount(){var t;const e=this.rest;null!==(t=e.showValue)&&void 0!==t||(e.showValue=!0)},mounted(){M(this,this.rest)}},ht=dt,bt=(n("39c4"),n("c1d0")),mt=Object(m["a"])(ht,ft,pt,!1,null,null,null),vt=mt.exports;_()(mt,"components",{QField:at["a"],QSlider:bt["a"]});var yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.rest.visible?n("div",[t.rest.withInput?n("div",{staticClass:"q-gutter-md col fb-field-date"},[n("q-input",{ref:"input",staticClass:"fb-field-content",attrs:{value:t.inputValue,mask:t.rest.inputMask||t.textInputMask,rules:t.rules,label:t.rest.label,clearable:t.rest.clearable,"clear-icon":t.rest["clear-icon"],disable:t.rest.disable},on:{input:t.onTextInput},scopedSlots:t._u([{key:"before",fn:function(){return[n("Attachment",{attrs:{config:t.outerLeft,f:t.outerLeftClick}})]},proxy:!0},{key:"prepend",fn:function(){return[t.innerLeft?n("Attachment",{attrs:{config:t.innerLeft,f:t.innerLeftClick}}):n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("CalendarInput",{attrs:{keyName:t.keyName,rest:t.rest,textInputValue:t.inputValue},on:{input:t.onInputLocal,focus:t.onFocus,blur:t.onBlur}})],1)],1)]},proxy:!0},t.innerRight?{key:"append",fn:function(){return[n("Attachment",{attrs:{config:t.innerRight,f:t.innerRightClick}})]},proxy:!0}:null,{key:"after",fn:function(){return[n("Attachment",{attrs:{config:t.outerRight,f:t.outerRightClick}})]},proxy:!0}],null,!0)})],1):n("div",{staticClass:"q-gutter-md col fb-field-date"},[n("h5",{staticClass:"fb-field-label text-subtitle1 q-mb-none"},[t._v(t._s(t.rest.label))]),n("CalendarInput",{class:t.rest.class+" input-"+t.keyName,attrs:{label:t.rest.label,keyName:t.keyName,textInputValue:t.inputValue,rest:t.rest},on:{input:t.onInput,focus:t.onFocus,blur:t.onBlur}})],1)]):t._e()},gt=[],wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-date",t._b({ref:"calendar",staticClass:"fb-field-content fb-field-date-calendar",attrs:{"today-btn":"",mask:t.mask,value:t.rest.value||t.today},on:{input:t.onInput},scopedSlots:t._u([{key:"default",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(e){return t.onInput("")}}}),t.rest.withInput?t._e():n("q-field",{ref:"calendarCheck",staticClass:"fb-field-hint",attrs:{value:t.textInputValue,rules:t.rules,borderless:"",dense:""}})]},proxy:!0}])},"q-date",t.rest,!1),[t.rest.withInput?n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],ref:"btn",attrs:{label:"Close",color:"primary",flat:""}})],1):t._e()])},kt=[],_t={name:"CalendarInput",props:{keyName:{type:String,required:!0},rest:{type:Object,required:!0},textInputValue:{type:String,required:!1}},data(){return{}},computed:{rules(){let t=O(this.rest.rules||[],i["a"],"TODO");const e=this.rest.requiredMessage||"Incorrect date",n=t=>{if(!t)return e;const[n,r,s]=t.split(".");return n<32&&r<13&&s>1900&&s<2222||e},r=t=>{const e=this.rest.requiredMessage||"Incorrect date";if(!t||t.length<23)return e;const[n,r]=t.split(" - ");let[s,i,o]=n.split(".");return s>31||i>12||o<1900?e:([s,i,o]=r.split("."),!(s>31||i>12||o<1900)||e)};return this.rest.required&&!this.rest.range?t=[n,...t]:this.rest.required&&(t=[r,...t]),t},mask(){let t="";return this.rest.calendarMask?this.rest.calendarMask:(t="DD.MM.YYYY","ru"===this.rest.localization||"en"===this.rest.localization&&(t="YYYY.MM.DD"),t)},today(){return(new Date).toLocaleDateString("ru")}},methods:{async onInput(t){this.$emit("input",t)}},mounted(){const t=document.querySelector(".fb-field-date-calendar .q-date__header button span i");t.title="Сегодня"}},xt=_t,qt=n("52ee"),Ct=n("7f67"),It=Object(m["a"])(xt,wt,kt,!1,null,null,null),Ot=It.exports;function St(t){return t?"string"===typeof t?t:t.from?t.from+" - "+t.to:"":""}_()(It,"components",{QDate:qt["a"],QBtn:g["a"],QIcon:v["a"],QField:at["a"]}),_()(It,"directives",{ClosePopup:Ct["a"]});var Rt={name:"DateInput",components:{CalendarInput:Ot,Attachment:q},props:{keyName:{type:String,required:!0},rest:{type:Object,required:!0}},data(){return{inputValue:""}},computed:f()(f()(f()({},S),j),{},{textInputMask(){let t="";return t=this.rest.range?"##.##.#### - ##.##.####":"##.##.####","ru"===this.rest.localization||"en"===this.rest.localization&&(t=this.rest.range?"####/##/## - ####/##/##":"####/##/##"),t}}),methods:f()(f()(f()({},C),I),{},{async onInputLocal(t){let e=t,n=t;"object"===typeof t&&null!==t&&void 0!==t&&t.from&&t.to&&(n=t.from+" - "+t.to),this.inputValue=St(n),await this.onInput(e)},async onTextInput(t){return this.rest.range?t?await this.onInputLocal({from:t.substr(0,10),to:t.substr(13,10)}):(this.inputValue="",await this.onInputLocal("")):await this.onInputLocal(t)}}),beforeMount(){var t;const e=this.rest;null!==(t=e.withInput)&&void 0!==t||(e.withInput=!0),this.inputValue=St(this.rest.value)},mounted(){M(this,this.rest)}},jt=Rt,Mt=n("7cbe"),Lt=Object(m["a"])(jt,yt,gt,!1,null,null,null),Et=Lt.exports;_()(Lt,"components",{QInput:$["a"],QIcon:v["a"],QPopupProxy:Mt["a"]});var Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.rest.visible?n("div",{staticClass:"q-gutter-md col fb-field-checkbox"},[n("q-field",{ref:"input",staticClass:"fb-field-label",attrs:{value:t.localVal,rules:t.rules,hint:t.rest.hint,name:"checkboxInput",borderless:"",dense:""},scopedSlots:t._u([{key:"control",fn:function(){return[n("q-checkbox",t._b({staticClass:"fb-field-content",attrs:{rules:t.rules},on:{focus:t.onFocus,blur:t.onBlur,input:t.onInputLocal}},"q-checkbox",t.rest,!1))]},proxy:!0},{key:"before",fn:function(){return[n("Attachment",{attrs:{config:t.outerLeft,f:t.outerLeftClick}})]},proxy:!0},t.innerLeft?{key:"prepend",fn:function(){return[n("Attachment",{attrs:{config:t.innerLeft,f:t.innerLeftClick}})]},proxy:!0}:null,t.innerRight?{key:"append",fn:function(){return[n("Attachment",{attrs:{config:t.innerRight,f:t.innerRightClick}})]},proxy:!0}:null,{key:"after",fn:function(){return[n("Attachment",{attrs:{config:t.outerRight,f:t.outerRightClick}})]},proxy:!0}],null,!0)})],1):t._e()},$t=[],Bt={name:"CheckboxInput",components:{Attachment:q},props:{keyName:{type:String,required:!0},rest:{type:Object,required:!0}},data(){return{localVal:!1}},computed:f()(f()({},S),j),methods:f()(f()(f()({},C),I),{},{async onInputLocal(t){this.localVal=t,this.$refs.input.validate(),await this.onInput(t)}}),beforeMount(){this.localVal=this.rest.value},mounted(){M(this,this.rest)}},At=Bt,Ft=n("8f8e"),Vt=Object(m["a"])(At,Nt,$t,!1,null,null,null),Tt=Vt.exports;_()(Vt,"components",{QField:at["a"],QCheckbox:Ft["a"]});var Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.rest.visible?n("div",{staticClass:"q-gutter-md col fb-field-file"},[n("q-file",t._b({staticClass:"fb-field-content",attrs:{"bottom-slots":"","use-chips":Boolean(t.rest.value&&t.rest.value.length&&t.rest.clearable)},on:{blur:t.onBlur,input:t.onInputLocal,focus:t.onFocus},scopedSlots:t._u([{key:"hint",fn:function(){return[t._v(" "+t._s(t.rest.hint)+" ")]},proxy:!0},{key:"before",fn:function(){return[n("Attachment",{attrs:{config:t.outerLeft,f:t.outerLeftClick}})]},proxy:!0},{key:"prepend",fn:function(){return[t.innerLeft?n("Attachment",{attrs:{config:t.innerLeft,f:t.innerLeftClick}}):n("q-icon",{attrs:{name:"cloud_upload"},on:{click:function(t){t.stopPropagation()}}})]},proxy:!0},t.innerRight?{key:"append",fn:function(){return[n("Attachment",{attrs:{config:t.innerRight,f:t.innerRightClick}})]},proxy:!0}:null,{key:"after",fn:function(){return[n("Attachment",{attrs:{config:t.outerRight,f:t.outerRightClick}})]},proxy:!0}],null,!0)},"q-file",t.rest,!1))],1):t._e()},Pt=[],Gt={name:"File",components:{Attachment:q},props:{keyName:{type:String,required:!0},rest:{type:Object,required:!0}},data(){return{}},computed:f()(f()({},S),j),methods:f()(f()(f()({},C),I),{},{async onInputLocal(t){if(!this.rest.rawData)return await this.onInput(t);let e;e=Array.isArray(t)?await Promise.all(t.map((async t=>await L(t)))):await L(t),await this.onInput(t,e),this.rest.rawDataValue=e}}),mounted(){M(this,this.rest)},beforeMount(){var t,e;null!==(e=(t=this.rest).rawData)&&void 0!==e||(t.rawData=!0)}},Dt=Gt,Kt=n("7d53"),zt=Object(m["a"])(Dt,Qt,Pt,!1,null,null,null),Yt=zt.exports;_()(zt,"components",{QFile:Kt["a"],QIcon:v["a"]});var Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.rest.visible?n("div",{staticClass:"q-gutter-md"},[n("q-card-section",t._b({ref:"input",staticClass:"fb-field-content",domProps:{innerHTML:t._s(t.rest.value)}},"q-card-section",t.rest,!1))],1):t._e()},Wt=[],Ut={name:"HtmlInjection",props:{keyName:{type:String,required:!0},rest:{type:Object,required:!0}},mounted(){M(this,this.rest)}},Jt=Ut,Xt=Object(m["a"])(Jt,Ht,Wt,!1,null,null,null),Zt=Xt.exports;_()(Xt,"components",{QCardSection:w["a"]});var te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.rest.visible?n("div",{staticClass:"q-gutter-md"},[n("h5",{staticClass:"text-subtitle1 q-mb-none fb-field-label"},[t._v(t._s(t.rest.label))]),n("q-editor",t._b({staticClass:"fb-field-content",attrs:{placeholder:t.rest.placeholder},on:{focus:t.onFocus,blur:t.onBlur,input:t.onInput}},"q-editor",t.rest,!1))],1):t._e()},ee=[],ne={name:"EditorInput",props:{keyName:{type:String,required:!0},rest:{type:Object,required:!0}},methods:f()({},C),beforeMount(){var t;(t=this.rest).localization||(t.localization="ru")},mounted(){M(this,this.rest)}},re=ne,se=n("d66b"),ie=Object(m["a"])(re,te,ee,!1,null,null,null),oe=ie.exports;_()(ie,"components",{QEditor:se["a"]});var ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.localRest.visible?n("div",{staticClass:"fb-field-button"},[n("q-field",{ref:"input",staticClass:"fb-field-label",attrs:{hint:t.localRest.hint,label:t.localRest.fieldLabel,borderless:"",dense:""},scopedSlots:t._u([{key:"control",fn:function(){return[n("q-btn",t._b({staticClass:"fb-field-content",on:{click:t.onClick}},"q-btn",t.localRest,!1),[t.localRest.tooltip?n("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[5,5]}},[t._v("\n          "+t._s(t.localRest.tooltip)+"\n        ")]):t._e()],1)]},proxy:!0}],null,!1,1329956325)})],1):t._e()},le=[],ue={name:"ButtonElement",props:{keyName:{type:String,required:!0},rest:{type:Object,required:!0}},data(){return{}},computed:{localRest(){if(!this.rest)return{};const t=f()(f()({},this.rest),{},{label:this.rest.value,fieldLabel:this.rest.label});return t}},methods:{async onClick(){const t=this.rest,e=t.onClick||t.onInput||t.onFocus||t.onBlur;"function"===typeof e&&await e(i["a"],this,this.rest)}},mounted(){M(this,this.rest)},beforeMount(){}},ce=ue,fe=(n("7826"),Object(m["a"])(ce,ae,le,!1,null,null,null)),pe=fe.exports;_()(fe,"components",{QField:at["a"],QBtn:g["a"],QTooltip:z["a"]});var de={name:"FieldSorter",data(){return{trigger:1,visibleTrigger:1}},props:{fieldInfo:{type:Object,required:!0},order:{type:Number,required:!0},rowNumber:{type:Number,required:!0}},components:{SimpleInput:A,Multiple:X,Select:ct,Slider:vt,Date:Et,Checkbox:Tt,Html:Zt,Editor:oe,Button:pe,File:Yt},computed:{inputType(){let t="";return t=this.fieldInfo.type,Q["d"].find((e=>e===t))?"simple":Q["a"].has(t)?t:"err"},rest(){let t={};const e=this;if(!this.trigger)return null;const n=this.fieldInfo;if(n.multiKey){const r=i["a"].fields[n.multiKey].fields[n.multiIndex][n.key],s={set:function(t,r,s){var o,a,l;t.watcher+=1,e.trigger+=1;const u=t.type&&(null===(o=Q["e"][t.type])||void 0===o||null===(a=o[r])||void 0===a?void 0:a.call(o,s,t));return void 0!==u&&(s=u),t[r]=s,"value"===r&&null!==(l=i["a"].fields[n.multiKey].value)&&void 0!==l&&l[n.multiIndex]&&(i["a"].fields[n.multiKey].value[n.multiIndex][n.key]=s),!0}},o=new Proxy(r,s);return i["a"].fields[n.multiKey].fields[n.multiIndex][n.key]=o,t=o,t}const r={set:function(t,n,r){var s,i;t.watcher+=1,e.trigger+=1;const o=t.type&&(null===(s=Q["e"][t.type])||void 0===s||null===(i=s[n])||void 0===i?void 0:i.call(s,r,t));return void 0!==o&&(r=o),t[n]=r,!0}};return t=new Proxy(i["a"].fields[n.key],r),t}},methods:{},beforeMount(){},watch:{rest:{handler(t){t.visible!==i["c"][this.fieldInfo.key]&&(this.visibleTrigger+=1),i["c"][this.fieldInfo.key]=t.visible},deep:!0}}},he=de,be=(n("bd94"),Object(m["a"])(he,o,a,!1,null,null,null)),me=be.exports,ve={name:"FieldMapper",components:{Field:me},props:{fields:{type:Array||void 0,required:!0},order:{type:Number,required:!0}},beforeMount(){var t,e;this.rows=null!==(t=this.rows)&&void 0!==t?t:[],i["a"].rows=null!==(e=i["a"].rows)&&void 0!==e?e:[];const n=this,r={component:n,get element(){var t;return null===this||void 0===this||null===(t=this.component)||void 0===t?void 0:t.$el}};i["a"].rows.push(r)}},ye=ve,ge=Object(m["a"])(ye,r,s,!1,null,null,null);e["a"]=ge.exports},1598:function(t,e,n){"use strict";n("f31d")},"1ecf":function(t,e,n){"use strict";n.d(e,"e",(function(){return d})),n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return b})),n.d(e,"a",(function(){return m})),n.d(e,"c",(function(){return v}));n("ddb0");var r=n("ca22"),s=n.n(r),i=n("8c12");function o(t,e){return t&&"object"!==typeof t?("function"===typeof t&&(t=t(i["a"],e)),"string"===typeof t?t:String(t)):""}function a(t,e){return"function"===typeof t&&(t=t(i["a"],e)),Boolean(t)}function l(t,e){return t?("function"===typeof t&&(t=t(i["a"],e)),Array.isArray(t)?t:Array(t)):[]}function u(t,e){return void 0===t&&(t=0),"function"===typeof t&&(t=t(i["a"],e)),isNaN(t)?0:Number(t)}function c(t){if("function"===typeof t)return t}const f={row(t,e){let n=u(t,e);return n<1&&(n=1),n},order(t,e){let n=u(t,e);return n<1&&(n=1),n},group(t,e){let n=u(t,e);return n<1&&(n=1),n},groupLabel(t,e){return o(t,e)},label(t,e){var n;let r=o(t,e);return e.required&&"*"!==(null===(n=r)||void 0===n?void 0:n[0])&&(r="* "+r),r},autocomplete(t,e){if("off"==t)return t;const n=a(t,e);return n?"on":"off"},hint(t,e){return o(t,e)},requiredMessage(t,e){return o(t,e)},metaValueKey(t,e){return o(t,e)},required(t,e){return a(t,e)},clearable(t,e){return a(t,e)},disable(t,e){return a(t,e)},disabled(t,e){return a(t,e)},clearable(t,e){return a(t,e)},"clear-icon"(t,e){return o(t,e)||"close"},loading(t,e){return a(t,e)},service(t,e){return"html"===e.type||"button"===e.type||a(t,e)},visible(t,e){var n,r;const s=a(t,e);return s||null!==(n=i["a"].global)&&void 0!==n&&null!==(r=n.fields)&&void 0!==r&&r.submitInvisible||(e.service=this.service(!0,e)),s&&void 0!==e.service&&(e.service=this.service(!1,e)),s},metaShouldSumbmit(t,e){return a(t,e)},rules(t,e){var n;let r=l(t,e);return null!==(n=r)&&void 0!==n&&n[0]||(r=[]),r},onInput(t){return c(t)},onFocus(t){return c(t)},onBlur(t){return c(t)},meta(t,e){const n=e.metaValueKey||"value";return t[n]&&(e.value=t[n]),t}},p=s()(s()({},f),{},{mask(t,e){return o(t,e)},prefix(t,e){return o(t,e)},suffix(t,e){return o(t,e)},autogrow(t,e){return a(t,e)}}),d={text:s()(s()({},p),{},{value(t,e){return o(t,e)}}),password:s()(s()({},p),{},{value(t,e){return o(t,e)}}),email:s()(s()({},p),{},{value(t,e){return o(t,e)}}),number:s()(s()({},p),{},{value(t,e){return u(t,e)}}),time:s()(s()({},p),{},{value(t,e){return o(t,e)}}),dateNative:s()(s()({},p),{},{value(t,e){return o(t,e)}}),textarea:s()(s()({},p),{},{value(t,e){return o(t,e)}}),select:s()(s()({},f),{},{value(t,e){return e.multiple?l(t,e):o(t,e)},writable(t,e){return a(t,e)},"use-input"(t,e){return a(t,e)},"use-chips"(t,e){return a(t,e)},multiple(t,e){return a(t,e)}}),multiple:s()(s()({},f),{},{value(t,e){return l(t,e)}}),slider:s()(s()({},f),{},{value(t,e){return u(t,e)},showValue(t,e){return a(t,e)},reverse(t,e){return a(t,e)},min(t,e){return u(t,e)},max(t,e){return u(t,e)},step(t,e){return u(t,e)}}),date:s()(s()({},f),{},{value(t,e){if(!e.range)return o(t,e)},range(t,e){return a(t,e)},withInput(t,e){return a(t,e)},inputMask(t,e){return o(t,e)},mask(t,e){return o(t,e)}}),checkbox:s()(s()({},f),{},{value(t,e){return a(t,e)}}),html:s()(s()({},f),{},{value(t,e){return o(t,e)}}),editor:s()(s()({},f),{},{value(t,e){return o(t,e)},placeholder(t,e){return o(t,e)}}),button:s()(s()({},f),{},{value(t,e){return o(t,e)},color(t,e){return o(t,e)},size(t,e){return o(t,e)}}),file:s()(s()({},f),{},{value(t,e){return"object"===typeof t?t:null},rawData(t,e){return a(t,e)},multiple(t,e){return a(t,e)},"max-files"(t,e){return u(t,e)},"max-file-size"(t,e){return u(t,e)},accept(t,e){return o(t,e)}})};function h(t){var e,n,r,s,i;return null!==(e=t.type)&&void 0!==e||(t.type="text"),null!==(n=t.value)&&void 0!==n||(t.value=""),null!==(r=t.service)&&void 0!==r||(t.service=!1),null!==(s=t.visible)&&void 0!==s||(t.visible=!0),null!==(i=t.hint)&&void 0!==i||(t.hint=""),t.clear=function(){this.component.clear()},t.reset=function(){this.component.reset()},t.rerender=function(){var t,e;null===(t=this.component)||void 0===t||null===(e=t.rerender)||void 0===e||e.call(t)},void 0===t.clearable&&(t.clearable=!0),void 0===t["clear-icon"]&&(t["clear-icon"]="close"),void 0===t.required&&(t.required=!1),void 0===t.visible&&(t.visible=!0),"object"!==typeof t.rules&&(t.rules=[]),t.required&&!t.label&&(t.label="*"),t}const b=["text","password","textarea","email","number","time","dateNative"],m=new Set(["select","multiple","slider","date","checkbox","html","editor","button","file"]),v=new Set(["html","button"])},"20be":function(t,e,n){},"2f39":function(t,e,n){"use strict";n.r(e);n("e6cf"),n("7d6e"),n("e54f"),n("985d"),n("31cd");var r=n("9869"),s=n("14c0"),i=n("42d2"),o=n("b05d"),a=n("2a19");r["a"].use(o["a"],{config:{},lang:s["a"],iconSet:i["a"],plugins:{Notify:a["a"]}});var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fb-mounting-point bg-white",attrs:{id:rootId}},[t.globalConfig&&t.globalConfig.fields?n("IsModal",{attrs:{settings:t.globalConfig,values:t.globalValues}}):t._e()],1)},u=[];n("ddb0");const c={fields:{},methods:{},title:""},f={};var p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isModal?n("div",{staticClass:"fb-modal"},[n("q-dialog",t._b({model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},"q-dialog",t.modalConfig,!1),[n("Form",{attrs:{settings:t.settings,values:t.values}})],1),t.modalConfig.triggerButton?n("q-btn",t._b({on:{click:function(e){t.isOpen=!t.isOpen}}},"q-btn",t.modalConfig.triggerButton,!1)):t._e()],1):n("Form",{attrs:{settings:t.settings,values:t.values}})},d=[],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fb-form bg-white",staticStyle:{"min-width":"min(75vw, 1800px)"}},[t.settings.title?n("div",{staticClass:"fb-title-wrap fb-form-title-wrap q-px-md q-py-xs relative-position",staticStyle:{"max-height":"8vh"}},[t.settings.modal?n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"fb-close-modal absolute",staticStyle:{right:"20px"},attrs:{dense:"",flat:"",icon:"close"}},[n("q-tooltip",{attrs:{"content-class":"fb-close-modal-tooltip bg-white text-primary"}},[t._v("Закрыть")])],1):t._e(),n("div",{staticClass:"fb-title fb-form-title text-h5"},[t._v(t._s(t.settings.title))])],1):t._e(),n("q-separator"),n("q-form",{ref:"form",staticClass:"fb-form-content q-pa-none scroll",on:{submit:t.onSubmit,reset:t.onReset,"validation-success":t.onValidateSuccess,"validation-error":t.onValidateError}},[t.settings.tabs?n("Tabs",{ref:"tabsComponent",attrs:{rows:t.rows,hasGroups:t.hasGroups},on:{submit:t.onSubmit,reset:t.onReset,clear:t.onClear}}):t.hasGroups?n("GroupMapper",{attrs:{rows:t.rows}}):n("RowMapper",{attrs:{rows:t.rows}})],1),n("q-separator"),n("Buttons",{attrs:{buttons:t.settings.buttons},on:{submit:t.trySubmit,reset:t.onReset,clear:t.onClear,back:t.onBack,next:t.onNext}})],1)},b=[],m=n("ca22"),v=n.n(m),y=n("5f67"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.fbGlobal.noButtons&&!1!==t.fbGlobal.buttons?t._e():n("div",{staticClass:"fb-form-buttons q-my-md q-px-md"},[t.buttons.reset?n("q-btn",t._b({class:t.common+t.buttons.reset.class,attrs:{type:"reset"},on:{click:function(e){return t.$emit("reset")}}},"q-btn",t.buttons.reset,!1)):t._e(),t.buttons.clear?n("q-btn",t._b({class:t.common+t.buttons.clear.class,attrs:{type:"button"},on:{click:function(e){return t.$emit("clear")}}},"q-btn",t.buttons.clear,!1)):t._e(),t.buttons.back&&t.step>0?n("q-btn",t._b({class:t.common+t.buttons.back.class,attrs:{type:"button"},on:{click:function(e){return t.$emit("back")}}},"q-btn",t.buttons.back,!1)):t._e(),t.buttons.next&&t.step+1<t.tabLength?n("q-btn",t._b({class:t.common+t.buttons.next.class,attrs:{type:"button"},on:{click:function(e){return t.$emit("next")}}},"q-btn",t.buttons.next,!1)):t._e(),t.buttons.close?n("q-btn",t._b({directives:[{name:"close-popup",rawName:"v-close-popup"}],class:t.common+t.buttons.close.class,attrs:{type:"button"}},"q-btn",t.buttons.close,!1)):t._e(),t.canSubmit?n("q-btn",t._b({class:t.common+t.buttons.submit.class,attrs:{type:"button"},on:{click:function(e){return t.$emit("submit")}}},"q-btn",t.buttons.submit,!1)):t._e()],1)},w=[],k=n("8c12"),_={name:"Buttons",props:{},data(){return{fbGlobal:k["a"],stepperStore:k["d"],common:"q-mr-md ",step:k["d"].step,tabLength:k["d"].tabLength,validated:k["d"].validated}},computed:{buttons(){let t={submit:{label:"Отправить",color:"primary"}};return k["a"].modal&&(t.close={label:"Отмена",color:"negative"}),k["a"].tabs&&(t.next={label:"Далее"},t.back={label:"Назад"}),k["a"].buttons&&"object"===typeof k["a"].buttons&&Object.entries(k["a"].buttons).forEach((([e,n])=>{t[e]="string"===typeof n?{label:n}:n})),t},canSubmit(){let t=!0;if(!this.tabLength)return t;if(this.step+1===this.tabLength)return t;const e=this.validated.find((t=>!1===t));return void 0===e&&t}},beforeMount(){k["a"].tabs&&(this.common="q-mx-sm ")},mounted(){const t=this;k["a"].buttons||(k["a"].buttons={}),k["a"].buttons.component||Object.defineProperty(k["a"].buttons,"component",{get(){return t}})},watch:{stepperStore:{handler(t){this.step=t.step,this.validated=t.validated},deep:!0}}},x=_,q=n("2be6"),C=n("9c40"),I=n("7f67"),O=n("8ccf"),S=n.n(O),R=Object(q["a"])(x,g,w,!1,null,null,null),j=R.exports;S()(R,"components",{QBtn:C["a"]}),S()(R,"directives",{ClosePopup:I["a"]});var M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-stepper",t._b({ref:"stepper",staticClass:"fb-tabs",staticStyle:{padding:"0"},attrs:{value:t.step,animated:"",flat:"","header-nav":!0},on:{input:t.onInput,"before-transition":t.beforeStep},scopedSlots:t._u([{key:"navigation",fn:function(){return[n("q-stepper-navigation",{staticClass:"formButtons"})]},proxy:!0}])},"q-stepper",t.tabsSettings,!1),t._l(t.tabs.steps,(function(e,r){return n("q-step",{key:r,staticClass:"fb-content-wrap",attrs:{name:r,title:e.title,icon:e.icon||"settings",error:Boolean(t.errors.find((function(t){return t===Number(r)}))),done:t.validated[r]}},[t.filteredRows[r]&&t.hasGroups?n("GroupMapper",{attrs:{rows:t.filteredRows[r]}}):t.filteredRows[r]?n("RowMapper",{attrs:{rows:t.filteredRows[r]}}):t._e()],1)})),1)},L=[],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.groupsWithRows,(function(e){return n("div",{key:t.groupsWithRows.indexOf(e)},[Array.isArray(e)?n("FieldMapper",{attrs:{fields:e,order:t.groupsWithRows.indexOf(e)}}):n("div",{ref:"wraps",refInFor:!0,staticClass:"fb-group-wrapper"},[e.groupLabel?n("h5",{ref:"labels",refInFor:!0,staticClass:"fb-group-label fb-field-label"},[t._v("\n        "+t._s(e.groupLabel)+"\n      ")]):t._e(),n("div",{staticClass:"fb-group"},[n("RowMapper",{attrs:{rows:e.rows,hasGroups:!1}})],1)])],1)})),0)},N=[],$=n("118e"),B=n("91a1"),A={name:"GroupMapper",components:{FieldMapper:$["a"],RowMapper:y["default"]},props:{rows:{type:Array,required:!0}},data(){return{}},computed:{groupsWithRows(){const t=Object(B["b"])(this.rows);return t}},methods:{parseFields(t){const e=Object(B["a"])(t);return console.log("%c⧭","color: #73998c",t,e),e}},mounted(){const{labels:t,wraps:e}=this.$refs;null===t||void 0===t||t.forEach(((t,n)=>{const r=t.clientHeight-32;r&&(e[n].className+=" fb-group-big-label-case")}))}},F=A,V=(n("be80"),Object(q["a"])(F,E,N,!1,null,null,null)),T=V.exports,Q={name:"Tabs",components:{RowMapper:y["default"],GroupMapper:T,Buttons:j},data(){return{fbGlobal:k["a"],filteredRows:[],step:0,errors:[],formRef:{},validated:[]}},props:{rows:{type:Array,required:!0},hasGroups:{type:Boolean,default:!1}},computed:{tabs(){var t;let e={steps:[{title:""},{title:""}]};const n=k["a"].tabs,r=null===(t=k["a"].global)||void 0===t?void 0:t.tabs;if(n&&n.steps&&Object.keys(n).length)Object.keys(n).forEach((t=>e[t]=n[t]));else if(n){const t=this.rows.length-2;for(let n=0;n<t;n++)e.steps.push({title:""})}return r&&"object"===typeof r&&Object.keys(r).forEach((t=>{"steps"===t?e.steps.forEach((t=>{Object.keys(r.steps).forEach((e=>t[e]=r.steps[e]))})):e[t]=r[t]})),e},tabsSettings(){let t={};const e=k["a"].tabs;return"object"!==typeof e||Object.entries(e).forEach((n=>{"object"!==typeof n&&(t[n]=e[n])})),t}},methods:{async onInput(t){await this.formRef.validate(),this.setStep(t)},async onNextClick(){const t=await this.validateStep();t&&this.$refs.stepper.next()},async onBackClick(){const t=await this.validateStep();t&&this.$refs.stepper.previous()},async beforeStep(t,e){await this.validateStep(e)},async validateStep(t){const e=await this.formRef.validate(),n=null!==t&&void 0!==t?t:this.step;return e?(this.validated[n]=!0,k["d"].validated[n]=!0,this.errors=this.errors.filter((t=>t!==n)),!0):(this.validated[n]=!1,k["d"].validated[n]=!1,this.errors.push(n),!1)},async trySubmit(t){return null===t||void 0===t||t.preventDefault(),await this.validateStep(),0===this.errors.length||(this.setStep(this.errors[0]),!1)},setStep(t){this.step=t,k["d"].step=t},rowsToTabs(){this.rows.length&&this.rows.forEach((t=>{const e=Object(B["a"])(t,k["a"].values);this.filteredRows.push(e)}));for(let t=0;t<this.filteredRows.length;t++)this.validated[t]=!1,k["d"].validated[t]=!1}},beforeMount(){this.rowsToTabs(),k["d"].tabLength=this.tabs.steps.length},mounted(){this.formRef=k["a"].form.ref;const t=this;"boolean"===typeof k["a"].tabs&&(k["a"].tabs={}),k["a"].tabs.component||Object.defineProperty(k["a"].tabs,"component",{get(){return t}})},watch:{rows:{handler(){this.filteredRows=[],this.rowsToTabs(),this.setStep(0)}}}},P=Q,G=(n("47b0"),n("f531")),D=n("87fe"),K=n("b19c"),z=Object(q["a"])(P,M,L,!1,null,null,null),Y=z.exports;S()(z,"components",{QStepper:G["a"],QStep:D["a"],QStepperNavigation:K["a"],QBtn:C["a"]});var H=n("1ecf"),W={name:"Form",components:{RowMapper:y["default"],Buttons:j,Tabs:Y,GroupMapper:T},data(){var t;return{confMethods:(null===(t=this.settings)||void 0===t?void 0:t.methods)||{},fbGlobal:k["a"],computeRawsTrigger:1,rows:[],isMounted:!1,hasGroups:!1}},props:{settings:{type:Object,required:!0},values:{type:Object,required:!1}},computed:{},methods:{async trySubmit(t){if(this.settings.tabs){const e=await this.$refs.tabsComponent.trySubmit(t);if(!e)return!1}const e=await this.$refs.form.validate();e&&await this.onSubmit()},async onSubmit(){const t=k["a"].getFormValues(),e=k["a"].notify||{};e.message||(e.message="Отправлено"),e.timeout||(e.timeout=200);const n="";if(this.confMethods.onSubmit){const e=await this.confMethods.onSubmit(k["a"],this,t,n);"function"===typeof e&&e(k["a"],this,t,n)}},async onReset(){let t;this.confMethods.onReset&&(t=await this.confMethods.onReset(k["a"],this)),k["a"].resetFormInputs(),"function"===typeof t&&await t(k["a"],this)},async onClear(){let t;this.confMethods.onClear&&(t=await this.confMethods.onClear(k["a"],this)),k["a"].clearFormInputs(),"function"===typeof t&&await t(k["a"],this)},async onValidateSuccess(){if(this.confMethods.onValidateSuccess){const t=await this.confMethods.onValidateSuccess(k["a"],this);"function"===typeof t&&t(k["a"],this)}},async onValidateError(t){const e=this.confMethods.onValidateError||this.confMethods.onValidationError;if(e){const n=await e(k["a"],this,t);"function"===typeof n&&await n(k["a"],this,t)}},onNext(){this.$refs.tabsComponent.onNextClick()},onBack(){this.$refs.tabsComponent.onBackClick()},async reset(){this.onReset()},async clear(){this.onClear()},async submit(){this.onSubmit()},rowsComputed(t){const e=k["a"];if(e.tabs){var n,r;const t=Object(B["c"])(e.fields,null===(n=e.global)||void 0===n||null===(r=n.fields)||void 0===r?void 0:r.tabIndex);return t}const s=Object(B["a"])(e.fields,t);return s}},beforeMount(){const t=this;k["a"].fields={};const e={set:function(t,e,n){var r,s;let i=t.type&&(null===(r=H["e"][t.type])||void 0===r||null===(s=r[e])||void 0===s?void 0:s.call(r,n,t));return void 0!==i&&(n=i),t.watcher+=1,t[e]=n,!0}};Object.entries(this.settings.fields).forEach((([n,r])=>{!this.hasGroups&&r.group&&(this.hasGroups=!0),Object.defineProperty(k["a"].fields,n,{get(){return this["$fb_"+n]},set(r){if(this["$fb_"+n]||(this["$fb_"+n]={}),Object.entries(r).forEach((([t,e])=>{this["$fb_"+n][t]=e})),!t.isMounted){const r=new Proxy(this["$fb_"+n],e);Object.entries(this["$fb_"+n]).forEach((([t,e])=>{r[t]=e})),t.settings.fields[n]=r,this["$fb_"+n]=r}t.computeRawsTrigger+=1}}),k["a"].fields[n]=r,"multiple"===r.type?(k["b"][n]=v()(v()({},r),{},{settings:{}}),Object.entries(r.settings).forEach((([t,e])=>k["b"][n].settings[t]=v()({},e)))):k["b"][n]=v()({},r)})),this.rows=this.rowsComputed(k["a"].values),Object.defineProperty(k["a"].form,"component",{get(){return t}}),Object.defineProperty(k["a"].form,"ref",{get(){return t.$refs.form}})},async mounted(){if(this.isMounted=!0,this.confMethods.onMount){const t=await this.confMethods.onMount(k["a"],this,this.$refs.form);t&&"function"===typeof t&&await t(k["a"],this,this.$refs.form)}},watch:{computeRawsTrigger:{handler(){const t=this.rowsComputed();this.rows=t},deep:!0}}},U=W,J=n("05c0"),X=n("eb85"),Z=n("0378"),tt=Object(q["a"])(U,h,b,!1,null,null,null),et=tt.exports;S()(tt,"components",{QBtn:C["a"],QTooltip:J["a"],QSeparator:X["a"],QForm:Z["a"]}),S()(tt,"directives",{ClosePopup:I["a"]});var nt={name:"IsModal",components:{Form:et},data(){var t;return{isModal:Boolean(this.settings.modal),isOpen:!1!==(null===(t=this.settings.modal)||void 0===t?void 0:t.isOpen),modalConfig:"object"===typeof this.settings.modal?this.settings.modal:{}}},props:{settings:{type:Object,required:!0},values:{type:Object,required:!1}},beforeMount(){k["a"].modal&&("object"!==typeof k["a"].modal&&(k["a"].modal={}),k["a"].modal.component||Object.defineProperty(k["a"].modal,"component",{get(){return this}}),k["a"].modal.closeModal=()=>this.isOpen=!1)}},rt=nt,st=(n("b3f8"),n("24e8")),it=Object(q["a"])(rt,p,d,!1,null,null,null),ot=it.exports;S()(it,"components",{QDialog:st["a"],QBtn:C["a"]});var at={name:"App",data(){return{globalConfig:formConfig,globalValues:formValues,fbGlobal:k["a"]}},components:{IsModal:ot},beforeMount(){var t;null!==(t=this.globalConfig)&&void 0!==t&&t.fields||console.log("no config or fields provided to form-builder"),k["a"].watcher||(k["a"].watcher=1);const e=this;Object.entries(this.globalConfig).forEach((([t,n])=>{if("fields"===t)return!0;Object.defineProperty(k["a"],t,{get(){return this["$fb_"+t]},set(n){this["$fb_"+t]=n,k["a"].watcher+=1,e.globalConfig[t]=n}}),k["a"][t]=n})),k["a"].values=this.globalValues||{},k["a"].component=this}},lt=at,ut=Object(q["a"])(lt,l,u,!1,null,null,null),ct=ut.exports,ft=function(){},pt=async function(){const t="function"===typeof ft?await ft({Vue:r["a"]}):ft,e={router:t,render:t=>t(ct),el:"#"+rootId};return{app:e,router:t}};async function dt(){const{app:t,router:e}=await pt();new r["a"](t)}dt()},"31cd":function(t,e,n){},"39c4":function(t,e,n){"use strict";n("63fc")},"3fd6":function(t,e,n){},"47b0":function(t,e,n){"use strict";n("6619")},5104:function(t,e,n){"use strict";n("3fd6")},"5f67":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.rows,(function(e){return n("div",{key:t.rows.indexOf(e),staticClass:"fb-row row"},[n("FieldMapper",{attrs:{fields:e,order:t.rows.indexOf(e)}})],1)})),0)},s=[],i=n("118e"),o={name:"RowMapper",components:{FieldMapper:i["a"]},props:{rows:{type:Array,required:!0}}},a=o,l=n("2be6"),u=Object(l["a"])(a,r,s,!1,null,null,null);e["default"]=u.exports},"63fc":function(t,e,n){},6619:function(t,e,n){},"66db":function(t,e,n){},7826:function(t,e,n){"use strict";n("c1a6")},"8c12":function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return a}));n("5319"),n("ddb0");var r=n("1ecf");const s={},i={form:{},getFormValues(){var t;const e={};return null===(t=Object.entries(this.fields))||void 0===t||t.forEach((([t,n])=>{var r;if(!0!==n.service)return"multiple"===n.type?(e[n.key]=[],void((null===(r=n.fields)||void 0===r?void 0:r.length)&&n.fields.forEach(((t,r)=>{n.value[r]&&Object.entries(t).forEach((([t,s])=>{if(!0!==s.service)return e[n.key][r]||(e[n.key][r]={}),s.metaShouldSumbmit?e[n.key][r][t]=s.meta:e[n.key][r][t]=s.value}))})))):"file"===n.type&&n.rawData?e[n.key]=n.rawDataValue:n.metaShouldSumbmit?e[n.key]=n.meta:e[n.key]=n.value})),e},resetFormInputs(){const t=this.fields;Object.keys(t).forEach((e=>{var n;e=String(e).replace("$fb_",""),Object.keys(t[e]).forEach((n=>{"fields"!==n&&(n in s[e]?t[e][n]=s[e][n]:delete t[e][n])})),null===(n=t[e].component)||void 0===n||n.rerender()})),this.form.component.computeRawsTrigger+=1},clearFormInputs(){const t=this.fields;Object.entries(t).forEach((([e,n])=>{var s;if("multiple"===n.type)return(null===(s=n.fields)||void 0===s?void 0:s.length)&&n.fields.forEach(((t,e)=>{Object.entries(t).forEach((([t,e])=>{e.value=""}))})),!0;r["c"].has(n.type)||(e=String(e).replace("$fb_",""),t[e].value="")})),this.form.component.$nextTick((()=>{this.form.ref.resetValidation()}))}},o=new Proxy({watcher:1,step:0,tabLength:1,validated:[]},{set:function(t,e,n){return t.watcher+=1,t[e]=n,!0}}),a={}},"91a1":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return u}));n("5319"),n("ddb0");var r=n("ca22"),s=n.n(r),i=n("8c12"),o=n("1ecf");const a=(t,e={},n=!1,r=[])=>{if(!Object.entries(t).length)return[];const a=[],l=[];for(let[s,d]of Object.entries(t)){var u;if(null!==(u=i["a"].global)&&void 0!==u&&u.fields)for(const[t,e]of Object.entries(i["a"].global.fields))void 0===d[t]&&(d[t]=e);if(d.watcher||(d.watcher=1),n&&(d.multiKey=n),d.key=String(s).replace("$fb_",""),Object(o["b"])(d),d.key in e&&(d.value=e[d.key]),Object.entries(d).forEach((([t,e])=>{var n,r;if("value"==t){var s;const t=d.metaValueKey||"value";e=(null===(s=d.meta)||void 0===s?void 0:s[t])||e}let i=null===(n=o["e"][d.type])||void 0===n||null===(r=n[t])||void 0===r?void 0:r.call(n,e,d);void 0!==i&&(d[t]=i)})),void 0===d.row)l.push([d]);else{const t=a[d.row-1];t?t.push(d):a[d.row-1]=[d]}}const c=a.filter((t=>null!=t)),f=c.map((t=>{const e=[],n=[];t.forEach((t=>{if(t.order)if(n[t.order-1]){let e=0;while(n[t.order+e])e+=1;n[t.order+e]=t}else n[t.order-1]=t;else e.push(t)}));const r=n.filter((t=>null!=t));return r.push(...e),r}));if(f.push(...l),!n)return f;const p=[];if(r.length)for(let s=0;s<r.length;s++)p.push([]);return r.forEach(((t,n)=>{f.forEach((r=>{const i=r.map((r=>{var i;r.multiIndex=n,r.value=t[r.key];const o=null===e||void 0===e?void 0:e[r.key];o&&(r.value=o);const a=null===e||void 0===e||null===(i=e[n])||void 0===i?void 0:i[r.key];return a&&(r.value=a),s()({},r)}));p[n].push(i)}))})),p};function l(t,e=1){if(!Object.entries(t).length)return[];const n=[],r={};for(let[o,a]of Object.entries(t)){let i=a.tab||e;o=String(o).replace("$fb_",""),void 0===i?(r[o]&&console.log("WARNING! Fields with repeating key"+o,s()({},a),a),r[o]=t[o]):(i-=1,i<0&&(i=0),n[i]?n[i][o]&&console.log("WARNING! Fields with repeating key"+o,s()({},a),a):n[i]={},n[i][o]=t[o])}n[0]||(n[0]={}),n[0]=s()(s()({},n[0]),r);const i=n.filter((t=>null!=t));return i}function u(t=[]){const e=[],n=[];t.forEach(((t,r)=>{n.push([]),t.forEach((t=>{if(t.group){const r=t.group;if(!e[r]){const s=n.length-1,i={fieldsInsideGroups:{[t.key]:t},groupLabel:t.groupLabel};n[s].length||n[s].fieldsInsideGroups?n.push(i):n[s]=i;const o=n.length-1;return e[r]={actualIndex:o}}const s=e[r].actualIndex;n[s].fieldsInsideGroups[t.key]=t,t.groupLabel&&(n[s].groupLabel=t.groupLabel)}else Array.isArray(n[r])?n[r].push(t):n.push([t])}))}));const r=[];return n.forEach((t=>{if(t){if(Array.isArray(t)&&t.length)return r.push(t);if(t.fieldsInsideGroups){const e={rows:a(t.fieldsInsideGroups),groupLabel:t.groupLabel};return r.push(e)}}})),r}},b3f8:function(t,e,n){"use strict";n("20be")},bbe5:function(t,e,n){},bd94:function(t,e,n){"use strict";n("66db")},be80:function(t,e,n){"use strict";n("d87f")},c1a6:function(t,e,n){},d87f:function(t,e,n){},e42e:function(t,e,n){"use strict";n("bbe5")},f31d:function(t,e,n){}});
};
renderer(id, data, config);
} 
catch (error) {  
console.log(error);
}
}